# 富岳向けドッキングシミュレーション実行スクリプト
富岳にてドッキングシミュレーションを実行するためのスクリプトになります。

## 動作イメージ
- タンパク質データとリガンドデータはそれぞれ特定のディレクトリにまとめて配置
- タンパク質ごとに1ジョブ（1ノード）を使用。全リガンドデータとのドッキングシミュレーションを行う。
- 各タンパク質データについて、全リガンドデータのドッキングシミュレーションを網羅的に行う

## 手順
### 設定ファイルの修正
`var.sh`を修正します。
- `WORKINGDIR`: このソフトウェア群のディレクトリを指定
- `PROTEINDIR`: タンパク質データ（.pdbqt）ファイルが置いてあるディレクトリを指定
- `LIGANDDIR`: リガンドデータ（.pdbqtに変換済み）ファイルが置いてあるディレクトリを指定
- `BINARY`: Quickvina-w以外を使う場合には、適宜変更
- `OUTPUTDIR`: 出力データ（.pdbqt形式）の出力先を指定
- `LOGDIR`: ログデータの出力先を指定

### Quickvina-Wのビルド（省略可能）
`qvina`フォルダ以下に既に富岳向けにビルドした`qvina-w`がありますので、そちらを使用可能です。
ビルドしたい場合には、`build_qvina.sh`を使用。

1. build_qvina.shの修正

ジョブスクリプトのヘッダーを修正。富岳のグループ名を記載
```
#PJM -g xxxxxxxx
```
2. ジョブの投入
```
pjsub build_qvina.sh
```

### 実行ファイルの修正
1. `run_tmpl.sh`の修正

ジョブスクリプトのヘッダーを修正。
- 実行時間
- グループ名
など

2. `run_docking.sh`の修正

ドッキングシミュレーションの設定を適宜修正ください。

### 実行（ジョブの投入）
`submit.sh`を使用します。
ログインノードにて、以下のコマンドを実行しますと、タンパク質の数だけジョブが順次投入されます。
```
./submit.sh
```

## 実行結果の確認
- 実行結果はvar.shで指定した`OUTPUTDIR`にタンパク質ごとにディレクトリを分けられて出力されます。
- 実行ログはvar.shで指定した`LOGDIR`にタンパク質ごとにディレクトリを分けられて出力されます。




